<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cardcard — Nhập dữ liệu</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script>try{document.documentElement.setAttribute('data-theme',localStorage.getItem('learnEnglish.theme')||'');}catch{}</script>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%231c1f44'/%3E%3Cpath d='M10 42h44' stroke='%2306b6d4' stroke-width='6' stroke-linecap='round'/%3E%3Ctext x='14' y='40' font-family='Inter, Arial' font-size='20' fill='%23a78bfa' font-weight='800'%3EA%3C/text%3E%3C/svg%3E" />
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <div id="appHeader"></div>

  <main class="container narrow">
    <h1 class="page-title">Nhập dữ liệu từ vựng</h1>

    <!-- <section class="io-panel" id="supabase-tools">
      <h2>Kết nối Database (Supabase)</h2>
      <p class="hint">Khi bật chế độ Database, dữ liệu sẽ đọc/ghi trực tiếp qua Supabase REST API.</p>
      <div class="io-actions">
        <button id="btnSupabaseCheck" class="btn">Kiểm tra kết nối</button>
      </div>
      <div id="supabaseStatus" class="hint"></div>

      <h3>Dán nhanh và nhập</h3>
      <p class="hint">Dán bảng TSV/CSV: cột 1 = ngày (bỏ qua), cột 2 = từ, cột 3 = chọn (bỏ qua), cột 4 = nghĩa (phân cách bằng dấu chấm phẩy ;), cột 5 = ví dụ (phân cách bằng ;).</p>
      <textarea id="pasteData" class="answer-input" rows="6" placeholder="Dán dữ liệu ở đây (TSV/CSV)"></textarea>
      <div class="io-actions">
        <button id="btnSupabasePasteImport" class="btn">Nhập từ văn bản lên Supabase</button>
      </div>
    </section> -->

  <form id="wordForm" class="data-form">
      <div class="form-row">
        <label for="wordInput">Từ vựng</label>
  <input type="text" id="wordInput" class="answer-input word-input" placeholder="Nhập từ (ví dụ: apple)" required />
      </div>

      <div class="form-row">
        <label for="posInput">Loại từ (nếu có)</label>
        <input type="text" id="posInput" class="answer-input" placeholder="ví dụ: n. / v. / adj. / adv." />
      </div>

      <div class="form-row">
        <label>Mô tả / Định nghĩa</label>
        <div id="defsContainer" class="defs-container"></div>
        <button type="button" id="btnAddDef" class="btn small">+ Thêm mô tả</button>
      </div>

      <div class="form-row">
        <label>Ví dụ / Câu mẫu (English)</label>
        <div id="examplesContainer" class="defs-container"></div>
        <button type="button" id="btnAddExample" class="btn small">+ Thêm ví dụ</button>
        <p class="hint">Ghi mỗi ví dụ trong một ô. Khi luyện tập, một ví dụ có thể được chọn làm câu hỏi và từ trả lời sẽ được thay bằng dấu gạch ngang.</p>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn primary">Lưu vào Database</button>
        <button type="button" id="btnReset" class="btn secondary">Xóa trắng</button>
      </div>
    </form>

    <!-- Đồng bộ Local đã bỏ: Sheet là nguồn dữ liệu duy nhất -->

    <section class="io-panel" id="srs-config">
      <h2>Cài đặt học nhắc lại (SRS)</h2>
      <div class="form-row">
        <label for="dailyNewLimit">Số từ mới mỗi ngày</label>
        <input type="number" id="dailyNewLimit" class="answer-input" value="20" min="0" />
      </div>
      <div class="form-row">
        <label for="dailyReviewLimit">Giới hạn ôn lại mỗi ngày (0 = không giới hạn)</label>
        <input type="number" id="dailyReviewLimit" class="answer-input" value="0" min="0" />
      </div>
      <div class="io-actions">
        <button id="btnSaveSrsCfg" class="btn secondary">Lưu cài đặt SRS</button>
      </div>
      <p class="hint">Mỗi ngày khi mở trang Luyện tập, ứng dụng sẽ xếp hàng ôn tập theo lịch (thẻ đến hạn trước, sau đó giới thiệu tối đa số từ mới).</p>
    </section>

    

    

    <!-- Move the dataset box to the very bottom, collapsible by default -->
    <section class="dataset-list">
      <details id="datasetCollapse">
        <summary class="collapsible-header">
          <span>Bộ từ hiện có</span>
          <span id="datasetCount" class="muted-count">— 0 từ</span>
          <span class="chev" aria-hidden="true">▾</span>
        </summary>
        <div id="datasetInfo" class="dataset-info">Đang tải…</div>
        <ul id="datasetList" class="list"></ul>
      </details>
    </section>
  </main>

  <footer class="app-footer">
    <span>Quay lại tab “Luyện tập” để ôn tập nhanh, hoặc tab “Học từ” để xem Cardcard.</span>
  </footer>

  <script src="assets/js/header.js"></script>
  <script src="assets/js/theme.js"></script>
  <script src="assets/js/config.js"></script>
  <script src="assets/js/utils.js"></script>
  <script src="assets/js/srs.js"></script>
  <script src="assets/js/admin.js"></script>
</body>
</html>

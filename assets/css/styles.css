/* FlashSheet UI â€“ modern, clean, themeable
   - Soft shadows, rounded corners, generous spacing
   - Inter font by default
   - Multiple themes via CSS variables on :root[data-theme]
   - Responsive and accessible
*/

/* Design tokens (Light as default) */
:root{
  --bg: #f7f9fc;
  --bg-2: #eef2f7;
  --text: #1f2937;
  --muted: #6b7280;
  --primary: #7c3aed;
  --primary-2: #a78bfa;
  --accent: #22d3ee;
  --success: #22c55e;
  --danger: #ef4444;
  --card: #ffffff;
  --surface: #ffffff;
  --chip-bg: #f3f4f6;
  --input-bg: #ffffff;
  --border: #e5e7eb;
  --shadow: rgba(15,23,42,0.08);
  --shadow-2: rgba(15,23,42,0.12);
  --header-bg: rgba(255,255,255,0.6);
  --header-h: 64px; /* unified header height for layout & overlay calculations */
  /* Buttons */
  --btn-secondary-bg: #eef2ff;
  --btn-secondary-text: var(--text);
  --btn-secondary-border: var(--border);
}

/* Dark theme */
:root[data-theme="dark"]{
  --bg: #0b1020;
  --bg-2: #0e1328;
  --text: #e5e7eb;
  --muted: #9aa3b2;
  --primary: #8b5cf6;
  --primary-2: #a78bfa;
  --accent: #22d3ee;
  --success: #22c55e;
  --danger: #ef4444;
  --card: #121836;
  --surface: #0f1530;
  --chip-bg: #1b2142;
  --input-bg: #101431;
  --border: rgba(255,255,255,0.12);
  --shadow: rgba(0,0,0,0.45);
  --shadow-2: rgba(0,0,0,0.6);
  --header-bg: rgba(10,14,30,0.6);
  /* Buttons */
  --btn-secondary-bg: var(--chip-bg);
  --btn-secondary-text: var(--text);
  --btn-secondary-border: var(--border);
}

/* Pastel theme (playful, bright) */
:root[data-theme="pastel"]{
  --bg: #faf7ff;
  --bg-2: #f7fbff;
  --text: #233044;
  --muted: #6b7280;
  --primary: #f472b6; /* pink */
  --primary-2: #a78bfa; /* keep violet for gradients */
  --accent: #60a5fa; /* blue */
  --success: #34d399;
  --danger: #f87171;
  --card: #ffffff;
  --surface: #ffffff;
  --chip-bg: #fdf2f8;
  --input-bg: #ffffff;
  --border: #f1e8ff;
  --shadow: rgba(55,48,163,0.08);
  --shadow-2: rgba(55,48,163,0.14);
  --header-bg: rgba(255,255,255,0.7);
}

/* Focus theme (minimal, high contrast content) */
:root[data-theme="focus"]{
  --bg: #ffffff;
  --bg-2: #fafafa;
  --text: #0b1220;
  --muted: #6b7280;
  --primary: #111827;
  --primary-2: #374151;
  --accent: #0ea5e9;
  --success: #16a34a;
  --danger: #dc2626;
  --card: #ffffff;
  --surface: #ffffff;
  --chip-bg: #f3f4f6;
  --input-bg: #ffffff;
  --border: #e5e7eb;
  --shadow: rgba(0,0,0,0.06);
  --shadow-2: rgba(0,0,0,0.12);
  --header-bg: rgba(255,255,255,0.9);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--text);
  background:
    radial-gradient(1000px 500px at 10% -10%, rgba(167,139,250,0.15), transparent 60%),
    radial-gradient(1000px 500px at 90% 110%, rgba(34,211,238,0.12), transparent 60%),
    linear-gradient(180deg, var(--bg) 0%, var(--bg-2) 100%);
  transition: background-color .25s ease, color .2s ease;
}

/* Slightly tweak gradients per theme */
@media (prefers-color-scheme: dark){
  :root:not([data-theme]) body{ background:
    radial-gradient(1000px 500px at 10% -10%, rgba(167,139,250,0.1), transparent 60%),
    radial-gradient(1000px 500px at 90% 110%, rgba(34,211,238,0.1), transparent 60%),
    linear-gradient(180deg, #0b1020 0%, #0e1328 100%);
  }
}

/* Header / Footer */
.app-header, .app-footer{
  display:flex; align-items:center; justify-content:space-between;
  padding:16px 24px; backdrop-filter:saturate(1.2) blur(8px);
  background:var(--header-bg); border-bottom:1px solid var(--border);
}
.app-footer{ border-top:1px solid var(--border); border-bottom:none; color:var(--muted); }
.brand{font-weight:800; letter-spacing:0.2px; color:var(--text); text-decoration:none}
.nav{display:flex; gap:8px; align-items:center}
.nav-btn{
  display:inline-block; padding:10px 14px; border-radius:999px;
  background:linear-gradient(135deg, rgba(167,139,250,0.25), rgba(34,211,238,0.25));
  color:var(--text); text-decoration:none; border:1px solid var(--border);
  transition:transform .15s ease, filter .2s, box-shadow .2s;
  box-shadow:0 2px 8px var(--shadow);
}
.nav-btn:hover{transform:scale(1.05); filter:brightness(1.03)}
.nav-btn:focus-visible{outline:none; box-shadow:0 0 0 3px rgba(34,211,238,0.35)}
.nav-btn.secondary{background:var(--surface)}
.nav-btn[aria-current="page"]{background:linear-gradient(135deg, #7c3aed, #22d3ee); color:white; border-color:transparent}

.container{max-width:980px; margin:24px auto; padding:0 16px}
.container.narrow{max-width:740px}

.controls{display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:16px}
.mode select{padding:10px 12px; border-radius:12px; background:var(--input-bg); color:var(--text); border:1px solid var(--border); box-shadow:0 1px 2px var(--shadow)}
.actions{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
.toggle{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background:var(--surface); border:1px solid var(--border); font-size:14px; color:var(--text); box-shadow:0 1px 2px var(--shadow)}
.toggle input{accent-color:#7c3aed}

/* Streak widget */
.streak-widget{
  display:flex; flex-direction:column; align-items:flex-end; gap:4px;
  padding:8px 12px; border-radius:14px;
  background:linear-gradient(135deg, rgba(234,88,12,0.12), rgba(234,179,8,0.12));
  border:1px solid var(--border);
  box-shadow:0 6px 16px var(--shadow);
  min-width: 180px;
}
.streak-main{display:flex; align-items:center; gap:8px; font-weight:800}
.streak-label{color:#b45309}
.streak-count{font-size:20px}
.streak-unit{color:var(--muted); font-weight:600}
.streak-sub{font-size:12px; color:var(--muted)}
.streak-widget .flame{
  position:relative; display:inline-block; filter:drop-shadow(0 2px 6px rgba(234,88,12,0.45));
  transform-origin:center bottom; will-change: transform;
  font-size: 28px; line-height: 1;
  animation: flameSway 1.3s ease-in-out infinite, flamePulse 1.8s ease-in-out infinite alternate;
}
.streak-widget .flame::after{
  content:""; position:absolute; left:50%; top:55%; width:18px; height:18px;
  transform:translate(-50%, -50%);
  background:radial-gradient(closest-side, rgba(234,88,12,0.55), rgba(234,88,12,0.0));
  filter:blur(2px); border-radius:50%; z-index:-1;
  animation: glowFlicker .9s ease-in-out infinite alternate;
}
.streak-widget .flame::before{
  content:""; position:absolute; left:50%; top:-2px; width:4px; height:4px; border-radius:50%;
  background:radial-gradient(circle, rgba(255,237,213,0.95) 0%, rgba(234,88,12,0) 70%);
  transform:translate(-50%, 0) scale(1); opacity:0.0;
  animation: emberRise 1.8s linear infinite;
}
.streak-widget.pulse{animation:pulseBright .9s ease}
@keyframes pulseBright{0%{transform:scale(1); box-shadow:0 6px 16px var(--shadow)} 60%{transform:scale(1.04); box-shadow:0 14px 30px rgba(234,88,12,0.25)} 100%{transform:scale(1);}}
@keyframes flameSway{ 0%{transform:rotate(-7deg) translateY(1px)} 50%{transform:rotate(7deg) translateY(-1px)} 100%{transform:rotate(-7deg) translateY(1px)} }
@keyframes flamePulse{ 0%{transform:scale(0.95)} 50%{transform:scale(1.15)} 100%{transform:scale(0.95)} }
@keyframes glowFlicker{0%{transform:translate(-50%, -50%) scale(0.95); opacity:.8} 100%{transform:translate(-50%, -50%) scale(1.15); opacity:1}}
@keyframes emberRise{0%{opacity:0; transform:translate(-50%, 4px) scale(.6)} 20%{opacity:.9} 100%{opacity:0; transform:translate(-50%, -12px) scale(1.1)}}
@media (prefers-reduced-motion: reduce){ .streak-widget .flame, .streak-widget .flame::after, .streak-widget .flame::before, .streak-widget.pulse{animation:none !important} }
@media (max-width: 420px){ .streak-widget .flame{ font-size: 24px; } }

/* Buttons */
.btn{background:linear-gradient(135deg, rgba(124,58,237,0.95), rgba(34,211,238,0.95)); border:none; color:white; padding:10px 14px; border-radius:12px; cursor:pointer; box-shadow:0 8px 20px var(--shadow); transition:transform .15s ease, filter .2s}
.btn:hover{transform:scale(1.05)}
.btn:active{transform:scale(0.98)}
.btn.primary{background:linear-gradient(135deg, #7c3aed, #22d3ee)}
.btn.secondary{background:var(--btn-secondary-bg); color:var(--btn-secondary-text); border:1px solid var(--btn-secondary-border)}
.btn.outline{background:var(--surface); color:var(--text); border:1px solid var(--border)}
.btn.small{padding:8px 12px; font-size:14px}

/* Cards / Question */
.Cardcard{position:relative}
.card{background:var(--card); border-radius:16px; padding:22px; box-shadow:0 8px 24px var(--shadow); min-height:260px; border:1px solid var(--border)}
.card-header{display:flex; justify-content:space-between; margin-bottom:12px}
.badge{font-size:12px; padding:6px 10px; border-radius:999px; background:#f5f3ff; color:#5b21b6; border:1px solid #e9d5ff}
.q-index{color:var(--muted)}
.question-text{font-size:22px; line-height:1.5; margin:12px 0 16px}
.question-pos{font-size:13px; color:var(--muted); margin-bottom:8px}
.question-level{font-size:13px; color:var(--muted); margin-bottom:8px}
.answer-area{display:grid; gap:10px}
.answer-input{width:100%; padding:12px 14px; border-radius:12px; border:1px solid var(--border); background:var(--input-bg); color:var(--text); box-shadow:0 1px 2px var(--shadow)}
.answer-input::placeholder{color:#9ca3af}
.answer-input:focus{outline:none; border-color:rgba(124,58,237,0.6); box-shadow:0 0 0 3px rgba(124,58,237,0.18)}
textarea.answer-input{min-height:96px; resize:vertical; line-height:1.4}
.word-input{padding-left:44px; position:relative; background:
  linear-gradient(90deg, rgba(124,58,237,0.25) 0 6px, transparent 6px) no-repeat,
  var(--input-bg); border-radius:12px}
.def-item .btn.secondary{min-width:42px}
.choice{display:block; width:100%; text-align:left; padding:12px 14px; border-radius:12px; background:var(--card); border:1px solid var(--border); cursor:pointer; color:var(--text); transition:transform .12s ease, background .15s, box-shadow .15s}
.choice:hover{background:rgba(0,0,0,0.02); transform:translateY(-1px)}
.choice.correct{border-color:rgba(34,197,94,0.8); box-shadow:0 0 0 3px rgba(34,197,94,0.18)}
.choice.wrong{border-color:rgba(239,68,68,0.8); box-shadow:0 0 0 3px rgba(239,68,68,0.18)}
.feedback{min-height:22px; margin:6px 2px; color:var(--muted)}
.card-footer{display:flex; justify-content:flex-end; margin-top:8px}

/* Post-answer extras */
.post-answer{margin-top:8px; display:grid; gap:8px}
.post-row{display:flex; gap:8px; align-items:center}
.translation{background:var(--card); border:1px solid var(--border); padding:10px 12px; border-radius:12px; box-shadow:0 1px 2px var(--shadow)}
.translation-row{margin:4px 0}
.translation .muted{color:var(--muted)}
.translation-links{display:flex; gap:8px; flex-wrap:wrap; margin-top:6px}

/* Animations */
@keyframes correctGlow{0%{box-shadow:0 0 0 0 rgba(34,197,94,0.3)} 100%{box-shadow:0 0 0 12px rgba(34,197,94,0)}}
@keyframes shake{10%, 90%{transform:translateX(-1px)} 20%, 80%{transform:translateX(2px)} 30%, 50%, 70%{transform:translateX(-4px)} 40%, 60%{transform:translateX(4px)}}
.card.correct{animation:correctGlow .8s ease-out}
.card.wrong{animation:shake .4s ease}

/* Stats */
.stats{display:flex; gap:18px; margin:16px 0}
.stat{background:var(--card); padding:12px 16px; border-radius:12px; border:1px solid var(--border); box-shadow:0 1px 2px var(--shadow)}
.stat .label{font-size:12px; color:var(--muted)}
.stat .value{font-size:20px; font-weight:800}

/* SRS summary cards */
.srs-cards{display:flex; gap:8px; flex-wrap:wrap; margin:8px 0 12px}
.srs-card{background:var(--card); border:1px solid var(--border); padding:8px 10px; border-radius:10px; font-size:13px; display:inline-flex; align-items:center; gap:8px; box-shadow:0 1px 2px var(--shadow)}
.srs-card .lvl{font-weight:700; color:var(--primary)}
.srs-card .cnt{font-weight:800}

/* Daily plan */
.daily-plan{background:var(--card); border:1px solid var(--border); padding:12px; border-radius:12px; margin:8px 0 12px; display:grid; gap:10px; box-shadow:0 1px 2px var(--shadow)}
.daily-plan .plan-row{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap}
.daily-plan .plan-summary{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
.daily-plan .plan-controls{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
.daily-plan label.inline{display:inline-flex; align-items:center; gap:8px; background:var(--surface); padding:6px 8px; border-radius:10px; border:1px solid var(--border); font-size:14px}
.daily-plan input[type="number"]{width:100px; padding:8px 10px; border-radius:10px; border:1px solid var(--border); background:var(--input-bg); color:var(--text)}
.plan-progress{display:grid; gap:6px}
.plan-progress .bar{height:8px; background:rgba(0,0,0,0.06); border-radius:999px; overflow:hidden}
.plan-progress .bar-fill{height:100%; width:0%; transition:width .25s ease; border-radius:999px}
.plan-progress .bar-fill.reviews{background:linear-gradient(90deg, rgba(34,211,238,0.7), rgba(34,211,238,1))}
.plan-progress .bar-fill.news{background:linear-gradient(90deg, rgba(124,58,237,0.7), rgba(124,58,237,1))}
.plan-legend{display:flex; gap:14px; align-items:center; font-size:13px; color:var(--muted)}
.plan-legend .dot{display:inline-block; width:8px; height:8px; border-radius:999px; margin-right:6px}
.plan-legend .dot.reviews{background:#22d3ee}
.plan-legend .dot.news{background:#7c3aed}

/* Admin */
.page-title{margin-top:8px}
.data-form{background:var(--card); padding:18px; border-radius:16px; box-shadow:0 8px 24px var(--shadow); border:1px solid var(--border)}
.form-row{display:flex; flex-direction:column; gap:8px; margin-bottom:14px}
.defs-container{display:grid; gap:8px}
.def-item{display:flex; gap:8px}
.def-item input{flex:1}
.io-panel{margin-top:18px; background:var(--card); border:1px solid var(--border); padding:12px; border-radius:12px; box-shadow:0 1px 2px var(--shadow)}
.io-actions{display:flex; gap:8px; flex-wrap:wrap}
.hint{color:var(--muted)}
.io-panel.notice{border-color:rgba(34,211,238,0.35); background:rgba(34,211,238,0.08)}
.io-panel.notice.warn{border-color:rgba(234,179,8,0.35); background:rgba(234,179,8,0.08)}
.list{list-style:none; padding-left:0}
.list li{padding:8px 0; border-bottom:1px dashed var(--border)}

/* Dataset list */
.dataset-list{margin-top:18px}
.dataset-list .list{ max-height: 40vh; overflow-y: auto; padding-right: 8px; }
.dataset-list .list::-webkit-scrollbar{width:8px}
.dataset-list .list::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.12); border-radius:8px}
.dataset-list .list::-webkit-scrollbar-track{background:transparent}
.dataset-list details{background:var(--card); border:1px solid var(--border); border-radius:12px; box-shadow:0 1px 2px var(--shadow)}
.dataset-list summary{list-style:none; cursor:pointer; padding:12px 14px; display:flex; align-items:center; gap:10px}
.dataset-list summary::-webkit-details-marker{display:none}
.dataset-list .collapsible-header{justify-content:space-between}
.dataset-list .muted-count{color:var(--muted); font-size:14px}
.dataset-list .chev{transition:transform .15s ease}
.dataset-list details[open] .chev{transform:rotate(180deg)}
.dataset-list #datasetInfo{padding:10px 14px; color:var(--muted)}
.dataset-list .list{margin:0 0 8px}

/* Confetti canvas */
.confetti-canvas{position:absolute; inset:0; pointer-events:none}

/* Flip-card (Study) */
.flip-wrap{perspective:1200px; max-width:840px; margin:0 auto; display:grid; place-items:center}
.flip-card{
  position:relative; width:100%; min-height:360px; max-width:760px;
  border-radius:16px; box-shadow:0 10px 28px var(--shadow);
  transform-style:preserve-3d; transition:transform .55s ease, box-shadow .2s;
  cursor:pointer; outline:none; border:1px solid var(--border); background:var(--card);
}
.flip-card:focus-visible{box-shadow:0 0 0 3px rgba(34,211,238,0.35), 0 10px 28px var(--shadow)}
.flip-card.is-flipped{transform:rotateY(180deg)}
.flip-face{
  position:absolute; inset:0; border-radius:16px; background:var(--card);
  padding:22px; backface-visibility:hidden; display:flex; flex-direction:column;
}
.flip-face::after{ content:""; position:absolute; inset:0; pointer-events:none; border-radius:16px; border:1px solid var(--border); }
.flip-back{transform:rotateY(180deg)}
.fc-header{display:flex; justify-content:space-between; align-items:center}
.fc-word{font-size:32px; font-weight:800; margin:10px 0 8px; letter-spacing:.2px}
.fc-pos{font-size:13px; display:inline-block; margin-bottom:8px; color:var(--muted); background:var(--chip-bg); padding:6px 8px; border-radius:10px}
.fc-image{margin:6px 0 8px}
.fc-image img{max-width:100%; border-radius:12px; display:block; box-shadow:0 6px 16px var(--shadow)}
.fc-defs{margin:8px 0 0; padding-left:18px}
.fc-defs li{margin:6px 0; position:relative; padding-right:42px}
.fc-meaning{font-size:18px; margin:8px 0}
.fc-explain{margin-top:8px}
.fc-ex-list{margin:8px 0 0; padding-left:18px}
.fc-ex-list li{margin:6px 0; position:relative; padding-right:42px}
.fc-hint{margin-top:auto; font-size:12px; color:var(--muted)}
.fc-actions{display:flex; gap:8px; align-items:center; margin:6px 0 2px}

/* Contrast theme (kept for compatibility) */
.flip-card.theme-contrast{ border-color: var(--border); }
/* Default contrast face: light card when using light themes */
.flip-card.theme-contrast .flip-face{ background:#fff; color:#0b1220; }
.flip-card.theme-contrast .flip-face::after{ border-color: var(--border); }
.flip-card.theme-contrast .badge{ background:#eef2ff; color:#3730a3; border-color:#e0e7ff }
.flip-card.theme-contrast .q-index{ color:#475569 }
.flip-card.theme-contrast .muted{ color:#64748b }
/* Dark theme: avoid pure white, use tinted dark card with proper contrast */
:root[data-theme="dark"] .flip-card.theme-contrast .flip-face{
  background: linear-gradient(160deg, rgba(56,189,248,0.08), rgba(129,140,248,0.06) 70%), var(--card);
  color: var(--text);
}
:root[data-theme="dark"] .flip-card.theme-contrast .badge{
  background: rgba(99,102,241,0.18);
  color: #c7d2fe;
  border-color: rgba(99,102,241,0.35);
}
:root[data-theme="dark"] .flip-card.theme-contrast .q-index,
:root[data-theme="dark"] .flip-card.theme-contrast .muted{ color: var(--muted); }

/* Fullscreen mode (modal-like) */
.flip-card.fullscreen{ position:fixed; left:50%; top:50%; transform:translate(-50%, -50%) rotateY(0deg); width:min(920px, 92vw); min-height:420px; max-height: 86vh; z-index:1100; }
.flip-card.fullscreen.is-flipped{ transform:translate(-50%, -50%) rotateY(180deg) }
.modal-backdrop.fs-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,0.35); backdrop-filter:blur(2px); z-index:1099 }

/* Inline translate button - always visible (mobile friendly) */
.trans-btn{position:absolute; right:8px; top:50%; transform:translateY(-50%); opacity:1; transition:opacity .12s ease; border:1px solid var(--border); background:var(--chip-bg); color:var(--text); border-radius:999px; padding:6px 10px; font-size:12px; cursor:pointer}
.trans-btn:hover{filter:brightness(1.05)}
.inline-trans{margin-top:4px; font-size:13px; color:var(--text)}
.inline-trans .muted{color:var(--muted)}

/* Slider overlay buttons */
.slide-btn{ position:absolute; top:50%; transform:translateY(-50%); width:42px; height:42px; border-radius:999px; border:1px solid var(--border); background:#ffffff; color:#111827; cursor:pointer; box-shadow:0 6px 16px var(--shadow); display:grid; place-items:center; }
.slide-btn{ background:var(--card); color:var(--text) }
.slide-btn:hover{ filter:brightness(1.03) }
.slide-prev{ left: -18px }
.slide-next{ right: -18px }
@media (max-width: 640px){ .slide-prev{ left: -6px } .slide-next{ right: -6px } }

/* Simple fade when changing card */
.flip-card.fading .flip-face{ animation: fadeInQuick .18s ease both }
@keyframes fadeInQuick{ from{ opacity:0 } to{ opacity:1 } }

/* Responsive */
@media (max-width: 640px){
  .app-header, .app-footer{padding:12px 14px}
  .nav{flex-wrap:wrap; gap:6px}
  .nav-btn{padding:8px 12px; font-size:14px}
  .container{margin:16px auto}
  .controls{flex-direction:column; align-items:stretch; gap:10px}
  .streak-widget{align-items:flex-start; min-width:unset; width:100%}
  .actions{flex-wrap:wrap}
  .card{padding:16px; min-height:220px}
  .question-text{font-size:18px}
  .choice{padding:14px; font-size:16px}
  .stats{flex-wrap:wrap; gap:10px}
  .dataset-list .list{max-height:50vh}
}
@media (max-width: 420px){
  .brand{font-size:18px}
  .nav-btn{font-size:13px}
  .mode select{width:100%}
  .btn{padding:10px 12px}
  .btn.small{padding:8px 10px}
  .answer-input{padding:12px}
  .question-text{font-size:16px}
}

/* Toast */
.toast{position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
  background:#111827; color:#f3f4f6; padding:10px 14px; border-radius:12px;
  border:1px solid rgba(255,255,255,0.12); box-shadow:0 10px 30px var(--shadow);
  opacity:0; pointer-events:none; transition:opacity .2s, transform .2s;
}
.toast.show{opacity:1; transform:translateX(-50%) translateY(-4px)}
.toast.success{border-color:rgba(34,197,94,0.5)}
.toast.error{border-color:rgba(239,68,68,0.5)}

/* Modal */
.modal{position:fixed; inset:0; z-index:1000}
.modal[aria-hidden="true"]{display:none}
.modal-backdrop{position:absolute; inset:0; background:rgba(0,0,0,0.35); backdrop-filter:blur(2px)}
.modal-dialog{position:relative; z-index:1; max-width:560px; margin:10vh auto; background:var(--card); border-radius:16px; padding:18px; border:1px solid var(--border); box-shadow:0 30px 80px var(--shadow-2)}
.modal-dialog h2{margin-top:0}
.user-modal .modal-backdrop{background:rgba(15,23,42,0.5); backdrop-filter:blur(6px)}
.user-modal .modal-dialog{max-width:420px; padding:32px 28px; text-align:center; background:linear-gradient(160deg, rgba(56,189,248,0.12), rgba(129,140,248,0.08) 70%), var(--card); border:1px solid rgba(125, 211, 252, 0.35)}
.user-modal-header{display:flex; flex-direction:column; align-items:center; gap:14px; margin-bottom:22px}
.user-modal-emblem{width:68px; height:68px; border-radius:22px; background:linear-gradient(135deg, #38bdf8, #6366f1); display:flex; align-items:center; justify-content:center; font-size:32px; box-shadow:0 18px 40px rgba(99,102,241,0.28)}
.user-modal-header h2{margin:0; font-size:24px; color:var(--text)}
.user-modal-desc{color:var(--muted); margin:0}
.user-modal-form{display:flex; flex-direction:column; gap:16px}
.user-modal-field{display:flex; flex-direction:column; gap:6px}
.user-modal-input{font-size:16px; padding:14px 16px; border-radius:12px; border:1px solid rgba(125,211,252,0.5); background:var(--input-bg); color:var(--text)}
.user-modal-input:focus{outline:none; border-color:#38bdf8; box-shadow:0 0 0 3px rgba(56,189,248,0.18)}
.user-modal-hint{color:#64748b; font-size:13px}
.user-modal-error{min-height:18px; color:#b91c1c; font-size:13px}
.user-modal-actions{display:flex; justify-content:flex-end; margin-top:6px}
.user-modal .btn.primary{min-width:160px; padding:12px 14px; font-weight:600; background:linear-gradient(135deg, #38bdf8, #6366f1); border:none; color:#f8fafc; box-shadow:0 12px 30px rgba(99,102,241,0.25)}
.user-modal .btn.primary:focus{outline:none; box-shadow:0 0 0 3px rgba(99,102,241,0.3)}
.user-modal .btn.primary:hover{transform:scale(1.05)}

/* Tables */
.word-table{ width:100%; border-collapse:separate; border-spacing:0; margin-top:16px; background:var(--card); border:1px solid var(--border); border-radius:12px; overflow:hidden; box-shadow:0 4px 12px var(--shadow) }
.word-table th, .word-table td{ padding:10px 12px; text-align:left; border-bottom:1px solid var(--border) }
.word-table thead th{ background:var(--surface); font-weight:600; color:var(--text) }
.word-table tbody tr:hover{ background:rgba(0,0,0,0.03) }
.word-table tbody tr:last-child td{ border-bottom:none }

/* Scroll wrapper for large tables (My Words) */
.table-wrap{ max-height: 60vh; overflow:auto; border-radius:12px; box-shadow:0 4px 12px var(--shadow); }
.table-wrap .word-table{ margin:0; }
@media (max-width: 640px){
  .table-wrap{ max-height: 68vh; }
  .word-table thead th{ position: sticky; top:0; z-index: 1; }
}

/* ===== New Header (responsive) ===== */
.site-header{ position:sticky; top:0; z-index:100; width:100%; background:var(--header-bg); backdrop-filter:saturate(1.2) blur(8px); border-bottom:1px solid var(--border); }
.header-inner{ max-width:1200px; margin:0 auto; padding:10px 16px; display:flex; align-items:center; justify-content:space-between; min-height:56px }
.brand{ display:inline-flex; align-items:center; gap:10px; text-decoration:none }
.brand-logo{ width:28px; height:28px; display:grid; place-items:center; border-radius:10px; background:linear-gradient(135deg, var(--primary), var(--accent)); color:#fff; box-shadow:0 6px 16px var(--shadow) }
.brand-name{ font-weight:800; letter-spacing:.2px; color:var(--text) }

.site-nav{ display:flex; align-items:center; gap:10px }
.nav-list{ display:flex; align-items:center; gap:8px; list-style:none; margin:0; padding:0 }
.nav-link{ display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:12px; text-decoration:none; color:var(--text); border:1px solid var(--border); background:var(--surface); box-shadow:0 1px 2px var(--shadow); transition:transform .15s ease, filter .2s, box-shadow .2s }
.nav-link .ico{ opacity:.9; font-size:14px }
.nav-link:hover{ transform:translateY(-1px); filter:brightness(1.03) }
.nav-link.is-active{ background:linear-gradient(135deg, var(--primary), var(--accent)); color:#fff; border-color:transparent; box-shadow:0 8px 20px var(--shadow) }

/* Submenu (Support: Guide + Feedback) */
.nav-list .has-submenu{ position:relative; }
.nav-list .submenu-toggle{ cursor:pointer; }
.nav-list .submenu{ position:absolute; top:100%; left:0; background:var(--card); border:1px solid var(--border); border-radius:12px; padding:8px; margin-top:6px; list-style:none; display:none; flex-direction:column; gap:6px; min-width:180px; box-shadow:0 12px 28px var(--shadow); z-index:200; }
.nav-list .has-submenu.open > .submenu{ display:flex; }
.nav-list .submenu a{ display:flex; align-items:center; gap:8px; padding:8px 10px; border-radius:10px; text-decoration:none; color:var(--text); background:var(--surface); border:1px solid var(--border); box-shadow:0 1px 2px var(--shadow); font-size:14px; }
.nav-list .submenu a:hover{ filter:brightness(1.05); }
@media (max-width: 768px){ .nav-list .submenu{ position:static; box-shadow:none; border:none; padding:4px 0; margin:4px 0 0; } }

/* Mobile drawer grouped support section */
.drawer-group-label{ font-weight:600; font-size:13px; color:var(--muted); padding:2px 4px; display:inline-block; }
.drawer-sub{ list-style:none; margin:4px 0 0 10px; padding:0; display:flex; flex-direction:column; gap:6px; }

/* Hamburger */
.menu-toggle{ display:none; position:relative; width:40px; height:40px; border-radius:12px; border:1px solid var(--border); background:var(--surface); cursor:pointer; box-shadow:0 1px 2px var(--shadow) }
.menu-toggle .bar{ position:absolute; left:9px; right:9px; height:2px; background:var(--text); border-radius:2px; transition:transform .2s, opacity .2s }
.menu-toggle .bar:nth-child(1){ top:12px }
.menu-toggle .bar:nth-child(2){ top:18px }
.menu-toggle .bar:nth-child(3){ top:24px }
.menu-toggle.open .bar:nth-child(1){ transform:translateY(6px) rotate(45deg) }
.menu-toggle.open .bar:nth-child(2){ opacity:0 }
.menu-toggle.open .bar:nth-child(3){ transform:translateY(-6px) rotate(-45deg) }

/* Drawer */
.nav-overlay{ position:fixed; top:var(--header-h); left:0; width:100vw; height:calc(100dvh - var(--header-h)); background:rgba(0,0,0,0.45); backdrop-filter:blur(3px); z-index:1600; opacity:0; pointer-events:none; transition:opacity .25s ease }
.nav-overlay.show{ opacity:1; pointer-events:auto }
.nav-drawer{ position:fixed; right:0; top:var(--header-h); bottom:0; width:min(86vw, 340px); background:var(--card); border-left:1px solid var(--border); box-shadow: -10px 0 40px var(--shadow-2), 0 0 0 1px var(--border); transform:translateX(100%); transition:transform .32s cubic-bezier(.33,.66,.4,1); z-index:1650; padding:22px 18px 32px; display:flex; flex-direction:column; gap:14px; overflow-y:auto; overscroll-behavior:contain }
.nav-drawer.open{ transform:translateX(0) }
.nav-drawer ul{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:8px }
.drawer-link{ display:block; padding:12px 14px; border-radius:12px; color:var(--text); text-decoration:none; border:1px solid var(--border); background:var(--surface); box-shadow:0 1px 2px var(--shadow) }
.drawer-link:hover{ filter:brightness(1.03) }
.drawer-link.is-active{ background:linear-gradient(135deg, var(--primary), var(--accent)); color:#fff; border-color:transparent }

.no-scroll{ overflow:hidden }

@media (max-width: 768px){
  .nav-list{ display:none }
  .menu-toggle{ display:inline-block }
}

/* Theme switcher */
.theme-switcher{ display:flex; align-items:center; gap:8px; margin-left:8px }
.theme-switcher select{
  padding:8px 10px; border-radius:999px; border:1px solid var(--border);
  background:var(--surface); color:var(--text); box-shadow:0 1px 2px var(--shadow);
}

